import java.net.*;
import java.io.*;
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;





import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class URLReader {

	public static void main(String[] args) throws IOException {
		URL oracle = new URL("https://play.google.com/store/apps/details?id=com.facebook.katana&hl=en");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(oracle.openStream()));
        
     // create both the string pattern and a split pattern
    	String pattern = ".*src=\"(.*)\" itemprop=\"screenshot\">";
    	String splitP = "img class=\"screenshot\"";
    //create pattern objects
    	Pattern regexp = Pattern.compile(pattern);
    	//Matcher matcher = regexp.matcher("");
    	//Pattern splitPat = Pattern.compile(splitP);
    	
    //Create array for the screenshots urls
    	List<String> list_url = new ArrayList<String>();

        String inputLine;
        String htmlContent="";
        while ((inputLine = in.readLine()) != null)
            htmlContent+=inputLine;
        in.close();
       // System.out.println(htmlContent);
        
        Document doc = Jsoup.parse(htmlContent);
        Elements elements = doc.getElementsByTag("IMG");
        for (int i=0 ; i< elements.size(); i++){
        	if (elements.get(i).hasClass("screenshot"))
        		System.out.println("Sources of "+ i +":"+elements.get(i).attr("src"));
        }
        //Create a matcher on the current html node
//        Matcher matcher = regexp.matcher(htmlContent);
//        while(matcher.find()){
//        	list_url.add(matcher.group(1));
//        }
//        
//        // Print out all the url in the list
//        for(String s : list_url){
//        	System.out.println(s);
//        }
//        
//        
	}

}
